#!/bin/bash

export WORKSPACE="${HOME}/workspace"

# Flyway setup.
export PATH=$PATH:$HOME/flyway

# Setup POSTGRES interaction
export PGHOST=$(kubectl get svc postgresql -o 'jsonpath={.spec.clusterIP}')
export PGPORT=$(kubectl get svc postgresql -o 'jsonpath={.spec.ports[0].port}')
export PGUSER="postgres"
export PGDATABASE="postgres"
export PGPASSWORD="password"
export PGSSLMODE="disable"

if [ ! -d "$HOME/.kube" ]; then
  echo -e "Kube config not found. Running setup-gcloud.sh"
  "$WORKSPACE/scripts/setup-gcloud.sh"
fi

