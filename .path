#!/bin/bash

# update path
export PATH="${HOME}/bin:/usr/local/bin:/usr/local/go/bin:${PATH}:${GOPATH}/bin:/usr/share/bcc/tools:/sbin"

# Rust
export PATH="${PATH}:${HOME}/.cargo/bin"

# Ruby
export PATH="${PATH}:${HOME}/.rbenv/bin"

# Python
command -v pyenv > /dev/null && eval "$(pyenv init -)"
command -v pyenv-virtualenv > /dev/null && eval "$(pyenv virtualenv-init -)"

# macOS GNU utils
if [[ -d "/usr/local/opt/coreutils/libexec/gnubin" ]]; then
  export PATH="/usr/local/opt/coreutils/libexec/gnubin:${PATH}"
fi

# macOS Homebrew bash completion
if [[ -f /usr/local/etc/bash_completion ]]; then
  # shellcheck disable=
  . /usr/local/etc/bash_completion
fi

# Google Cloud SDK
[[ -f "${HOME}/google-cloud-sdk/path.bash.inc" ]] && source "${HOME}/google-cloud-sdk/path.bash.inc"
[[ -f "${HOME}/google-cloud-sdk/completion.bash.inc" ]] && source "${HOME}/google-cloud-sdk/completion.bash.inc"

# Kubernetes
if command -v kubectl > /dev/null; then
  # shellcheck disable=
  source <(kubectl completion bash)
fi

# Kops
if command -v kops > /dev/null; then
  # shellcheck disable=
  source <(kops completion bash)
fi

# fzf
[[ -f ~/.fzf.bash ]] && source ~/.fzf.bash

# Node
export NVM_DIR="${HOME}/.nvm"
[[ -s "${NVM_DIR}/nvm.sh" ]] && \. "${NVM_DIR}/nvm.sh"  # This loads nvm
[[ -s "${NVM_DIR}/bash_completion" ]] && \. "${NVM_DIR}/bash_completion"  # This loads nvm bash_completion

# Golang
export GOPATH="${HOME}/go"
export PATH="${PATH}:${GOPATH//://bin:}/bin"
export GOENV_ROOT="${HOME}/.goenv"
export PATH="${GOENV_ROOT}/bin:${PATH}"
command -v goenv > /dev/null && eval "$(goenv init -)"
command -v gocomplete > /dev/null && complete -C gocomplete go

# Ruby
command -v rbenv > /dev/null && eval "$(rbenv init -)"

[[ -f /usr/local/etc/bash_completion ]] && . /usr/local/etc/bash_completion
